import{d as B,r as u,o as L,a as U,c as N,b as I,t as E,n as P,e as _,_ as b,u as K,f as h,w as f,g as R,h as M,i as g,j as V,k,l as C,m as q,p as D,q as j,E as S,s as z}from"./index-C48ACZe_.js";const A=100,O=B({__name:"Faulttext",props:{content:{type:String,default:"CONTEXT"},ifFault:{type:Boolean,default:!1}},setup($,{expose:r}){const i=$,e=u(void 0),l=u(void 0),d=u(""),p=a=>{let n="",o=0;const v=setInterval(()=>{o<a.length?(n+=a[o],d.value=n,o++):clearInterval(v)},A)};r({typeMessage:p});const m=()=>{const a=document.getElementsByClassName("faulttext");a.length>0&&(e.value=a[0])},c=()=>{clearInterval(l.value),setTimeout(()=>{clearInterval(l.value),e.value&&(e.value.classList.remove("faulttext_fault"),e.value.style.transform="",e.value.style.clipPath="")},1e3),l.value=window.setInterval(()=>{if(e.value){e.value.classList.add("faulttext_fault"),e.value.style.transform=`translate(${Math.random()*20-10}%,${Math.random()*20-10}%)`;const a=Math.random()*100,n=Math.random()*100,o=Math.random()*20+30,v=Math.random()*20+5;e.value.style.clipPath=`polygon(${a}% ${n}%, ${a+v}% ${n}%, ${a+v}% ${n+o}%, ${a}% ${n+o}%)`}},30)};return L(()=>{m(),p(i.content),i.ifFault&&setTimeout(()=>{c()},1500)}),U(()=>{clearInterval(l.value)}),(a,n)=>(_(),N("div",{onClick:c},[I("p",{class:"faulttext",style:P({"--fault-text":`'${i.content}'`})},E(d.value),5)]))}}),W=b(O,[["__scopeId","data-v-937a33c4"]]),X={class:"container"},G={style:{margin:"30vh auto"}},H={class:"message title-message"},J={class:"footer"},Q=B({__name:"ChatLogin",setup($){const r=u(!1),i=u(),e=K(),l=u(""),d=u("123456"),p=u("18335083606"),m=["登录超时！请重新登录","登录失败！用户名或密码错误","欢迎使用WinterAI！今天从哪里开始呢？"],c=u(m[0]),a=R(),n=async()=>{const{data:s}=await j({phone:p.value,password:d.value});console.log(s),s.code==200?(r.value=!0,c.value=m[2],i.value.typeMessage(c.value),e.token=s.tokenValue,e.loginId=s.loginId):(r.value=!1,c.value=m[1])},o=async()=>{if(!e.chatId)try{const s=await v();if(!s||s==="null"){S.error("无法获取chatId，请稍后重试！");return}e.chatId=s,e.chat1stMsg=l.value,a.push({path:"/",query:{chatTitle:l.value.substring(0,5)}})}catch(s){S.error("获取chatId失败，请稍后重试！"),console.error("获取 chatId 错误:",s);return}},v=async()=>{const s=await z({userID:"111111"}),{data:t}=s.data;return e.chatId=t,String(e.chatId)},F=async()=>{r.value?await o():await n()};return L(()=>{}),(s,t)=>{const w=M("el-input"),x=M("el-button"),T=M("el-card");return _(),N("div",X,[I("div",G,[I("div",H,[h(W,{ref_key:"faultRef",ref:i,content:c.value,ifFault:!0},null,8,["content"])]),h(T,{class:"input-card"},{footer:f(()=>[h(x,{type:"warning",plain:""},{default:f(()=>t[5]||(t[5]=[g("功能1")])),_:1}),h(x,{type:"success",plain:""},{default:f(()=>t[6]||(t[6]=[g("功能2")])),_:1})]),default:f(()=>[I("div",J,[r.value?(_(),V(w,{key:0,modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=y=>l.value=y),type:"textarea",row:2,placeholder:"Please input Message",class:"chat-input",onKeyup:k(o,["enter"])},null,8,["modelValue"])):C("",!0),r.value?C("",!0):(_(),V(w,{key:1,modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=y=>p.value=y),placeholder:"Please input phone",class:"chat-input",onKeyup:k(n,["enter"])},{prepend:f(()=>t[3]||(t[3]=[g(" phone ")])),_:1},8,["modelValue"])),r.value?C("",!0):(_(),V(w,{key:2,modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=y=>d.value=y),placeholder:"Please input password",class:"chat-input",type:"password",onKeyup:k(n,["enter"]),"show-password":""},{prepend:f(()=>t[4]||(t[4]=[g(" password ")])),_:1},8,["modelValue"])),h(x,{type:"primary",onClick:F,icon:q(D),class:"send-button"},null,8,["icon"])])]),_:1})])])}}}),Z=b(Q,[["__scopeId","data-v-90a9f8ee"]]);export{Z as default};
