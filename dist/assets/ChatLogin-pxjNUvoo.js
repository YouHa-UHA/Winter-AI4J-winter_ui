import{d as b,r,o as B,a as U,c as F,b as I,t as E,n as P,e as h,_ as L,u as K,f as g,w as f,g as R,h as M,i as _,j as V,k,l as C,m as q,p as D,q as j,E as S,s as z}from"./index-JuojpM4A.js";const A=100,O=b({__name:"Faulttext",props:{content:{type:String,default:"CONTEXT"},ifFault:{type:Boolean,default:!1}},setup($,{expose:c}){const i=$,e=r(void 0),o=r(void 0),d=r(""),p=a=>{let s="",u=0;const v=setInterval(()=>{u<a.length?(s+=a[u],d.value=s,u++):clearInterval(v)},A)},m=()=>{const a=document.getElementsByClassName("faulttext");a.length>0&&(e.value=a[0])},l=()=>{clearInterval(o.value),setTimeout(()=>{clearInterval(o.value),e.value&&(e.value.classList.remove("faulttext_fault"),e.value.style.transform="",e.value.style.clipPath="")},1e3),o.value=window.setInterval(()=>{if(e.value){e.value.classList.add("faulttext_fault"),e.value.style.transform=`translate(${Math.random()*20-10}%,${Math.random()*20-10}%)`;const a=Math.random()*100,s=Math.random()*100,u=Math.random()*20+30,v=Math.random()*20+5;e.value.style.clipPath=`polygon(${a}% ${s}%, ${a+v}% ${s}%, ${a+v}% ${s+u}%, ${a}% ${s+u}%)`}},30)};return B(()=>{m(),p(i.content),i.ifFault&&setTimeout(()=>{l()},1500)}),U(()=>{clearInterval(o.value)}),c({typeMessage:p,triggerFault:l}),(a,s)=>(h(),F("div",{onClick:l},[I("p",{class:"faulttext",style:P({"--fault-text":`'${i.content}'`})},E(d.value),5)]))}}),W=L(O,[["__scopeId","data-v-b6877180"]]),X={class:"container"},G={style:{margin:"30vh auto"}},H={class:"message title-message"},J={class:"footer"},Q=b({__name:"ChatLogin",setup($){const c=r(!1),i=r(),e=K(),o=r(""),d=r("123456"),p=r("18335083606"),m=["登录超时！请重新登录","登录失败！用户名或密码错误","欢迎使用WinterAI！今天从哪里开始呢？"],l=r(m[0]),a=R(),s=async()=>{const{data:n}=await j({phone:p.value,password:d.value});console.log(n),n.code==200?(c.value=!0,l.value=m[2],i.value.typeMessage(l.value),e.token=n.tokenValue,e.loginId=n.loginId):(c.value=!1,l.value=m[1],i.value.typeMessage(l.value),i.value.triggerFault(l.value))},u=async()=>{if(!e.chatId)try{const n=await v();if(!n||n==="null"){S.error("无法获取chatId，请稍后重试！");return}e.chatId=n,e.chat1stMsg=o.value,a.push({path:"/",query:{chatTitle:o.value.substring(0,5)}})}catch(n){S.error("获取chatId失败，请稍后重试！"),console.error("获取 chatId 错误:",n);return}},v=async()=>{const t=(await z({userID:"111111"})).data;return e.chatId=t,String(e.chatId)},N=async()=>{c.value?await u():await s()};return B(()=>{}),(n,t)=>{const w=M("el-input"),x=M("el-button"),T=M("el-card");return h(),F("div",X,[I("div",G,[I("div",H,[g(W,{ref_key:"faultRef",ref:i,content:l.value,ifFault:!0},null,8,["content"])]),g(T,{class:"input-card"},{footer:f(()=>[g(x,{type:"warning",plain:""},{default:f(()=>t[5]||(t[5]=[_("功能1")])),_:1}),g(x,{type:"success",plain:""},{default:f(()=>t[6]||(t[6]=[_("功能2")])),_:1})]),default:f(()=>[I("div",J,[c.value?(h(),V(w,{key:0,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=y=>o.value=y),type:"textarea",row:2,placeholder:"Please input Message",class:"chat-input",onKeyup:k(u,["enter"])},null,8,["modelValue"])):C("",!0),c.value?C("",!0):(h(),V(w,{key:1,modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=y=>p.value=y),placeholder:"Please input phone",class:"chat-input",onKeyup:k(s,["enter"])},{prepend:f(()=>t[3]||(t[3]=[_(" phone ")])),_:1},8,["modelValue"])),c.value?C("",!0):(h(),V(w,{key:2,modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=y=>d.value=y),placeholder:"Please input password",class:"chat-input",type:"password",onKeyup:k(s,["enter"]),"show-password":""},{prepend:f(()=>t[4]||(t[4]=[_(" password ")])),_:1},8,["modelValue"])),g(x,{type:"primary",onClick:N,icon:q(D),class:"send-button"},null,8,["icon"])])]),_:1})])])}}}),Z=L(Q,[["__scopeId","data-v-c6307122"]]);export{Z as default};
